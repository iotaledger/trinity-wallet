steps:
  - label: ":mag: Audit shared and desktop dependencies"
    command: "cd src/shared && yarn audit && cd ../desktop && yarn audit && cd ../.."
    agents:
      queue: dev
    plugins:
      docker#v1.4.0:
        image: "rajivshah/trinity-desktop-ci"
        always-pull: true

  - wait

  - label: ":eslint: Run ESLint for shared and desktop"
    command: "yarn lint:shared && yarn lint:desktop"
    agents:
      queue: dev
    plugins:
      docker#v1.4.0:
        image: "rajivshah/trinity-desktop-ci"
        always-pull: true

  - wait

  - label: ":react: Bundle"
    command: "cd src/desktop && yarn build"
    agents:
      queue: dev
    plugins:
      docker#v1.4.0:
        image: "rajivshah/trinity-desktop-ci"
        always-pull: true
