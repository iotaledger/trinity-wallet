import get from 'lodash/get';
import reduce from 'lodash/reduce';
import each from 'lodash/each';
import size from 'lodash/size';
import { iota } from '../libs/iota';

const t = [
    [
        {
            hash: '9RCLSHF9MMZPAVUUDADKPYRIEG9ENM9HUCBQBG9G9DSKMZQOAJVMXNEYCBKDXYVELMPVXE9VZVHG99999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'PBIWEDQONHCTPTEJDRWLGPBTUHFVXDUXVRBUISTG9ZAM9GLIMJCWFAJIOUMTTF9QXQWGQLNIWHFTEHBPY',
            value: 0,
            obsoleteTag: 'ZC9999999999999999999999999',
            timestamp: 1509985380,
            currentIndex: 0,
            lastIndex: 0,
            bundle: 'LXBYRFT9LR9FRJAPGWBIIRXKJCLXAPFXLZPN9ZRFVIXIDJLFVF9G9SDREDZSOCCGAWCDKQADYHGHIPDJB',
            trunkTransaction: 'UZBVZQEBZPPKICQEVDMSCRTHXNCVKYRBQSMWXSPOUUKXZPVJBATWSXLYQNEK9GCNAJEKXKSFVIAN99999',
            branchTransaction: 'QONLLQJENVKIVACEALNTYLMKSXCQFMFCG9BY9APPDLCZNTZXLIQKHDDZJSH9Y9AJRCBHR9VZNBHIZ9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509985383051,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'WA999RZC9999999999999999999',
            persistence: false,
        },
    ],
    [
        {
            hash: 'LA9CMGG9JKKNIUZFHBYCHXKZXADXTEF9YYS9QQNLSYYYOQWRGUJE9FXWFGBTPUDGNKKOWVKSFBNI99999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'THJSZPQBZHPZOYKWRBXXWUWCELTSPN9NAYUSJFUO9RHLFHUAVRXFQNFLJLFDPT9ARCGOEQCXU9F9WUYGC',
            value: 0,
            obsoleteTag: 'GD9999999999999999999999999',
            timestamp: 1509988061,
            currentIndex: 0,
            lastIndex: 0,
            bundle: 'ERXJPAQJDURGKOZFPFLAFCUTKJVNKGLPPJC9QENUFLDZ9UGXPDVOJAEWUTFIJFSKEJL9RHB9RUHUKVHY9',
            trunkTransaction: 'HNZFAALCBBLREIBLODGJGKJWSFIYNECGHFISNIRLZTVKSRVTKNETYZBPNKWMEOYCDFYFFIFMSBJAA9999',
            branchTransaction: 'XWVHYHVTRCISCGXKMCBGBU9FC9AEDUCIMPQMFIXD9YOUIAMSXDYJJAOJEKQQGAZPRDPVZUCPNUWRZ9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509988063204,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'WZ999REE9999999999999999999',
            persistence: false,
        },
    ],
    [
        {
            hash: 'JWBILEAQNQXNDFZXYYTXGMNLRNXXGZWGBAXIPRCASIIAOMUUTSIFZWGQPSSRVJJDXJKUVSRLGIBUA9999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'PBIWEDQONHCTPTEJDRWLGPBTUHFVXDUXVRBUISTG9ZAM9GLIMJCWFAJIOUMTTF9QXQWGQLNIWHFTEHBPY',
            value: 300,
            obsoleteTag: 'PA9999999999999999999999999',
            timestamp: 1509988185,
            currentIndex: 0,
            lastIndex: 3,
            bundle: 'RILUGDZPDPJE9QHBYJH9ZIGIXGUWIYW9CIOPIETIY9IOA9ZKSXTRCLXLEQJOBOPB9JNSSCJVYIKU9DKRW',
            trunkTransaction: 'ERV9TVWYISKKSNMZZKDHDYADQFTQQATKVITMSFQGXFIPDIEAMNPTD99VFTYLQYNDWIDAKVRBZLCC99999',
            branchTransaction: 'FHEUXVKRZVAPHANUQNYEZHSANWRIRFCDWMAZRC9WBHXUDXSDSSDBPVKZHDAPXDBVY9DWNWV9WLURA9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509988358420,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'SA999IBD9999999999999999999',
            persistence: false,
        },
        {
            hash: 'ERV9TVWYISKKSNMZZKDHDYADQFTQQATKVITMSFQGXFIPDIEAMNPTD99VFTYLQYNDWIDAKVRBZLCC99999',
            signatureMessageFragment:
                'BIXAGISMBWUMBMQSKCBASUEBFPCEBGZEGMCOAFH9BNLKHXEFHNFHJ9CZSTHPTE9HXRGCXIHIMYYQ9DIOWZZCDDCFQJVOHBIWJKPZQLZMHAYUIXSNDUHDAINTDDHAIIYMOQLLEJJNLBCXTNPMXLNGISDTJOXK9JEESZFLUFPNMOMDKHYEZZTZXAVTSGAQDCVISJRRMIAGHTKKXBVEIJIIIPFUVEBDJLGRWVWDJOJXARMYVUXJRVWGEIZLOIP9SNGPWRV9OAQ9ZEPCGQRJDSNLHLNLEYWCOSEVQZWGNZHBYFWMMDEMCDYO9BZICRJIDPWEFOVBANCGAKYFHABECOJEZHXIPDLHENXJVXUAFJVILWIPLSOV9CCEP9FNUY9WMQBDGYGDIRYWBUYSHTCWUGAADCPWLLJYTLHLSSKRSXZCLQ9NTQKYM9KNYSBOJWA9QSKIPABFJMAWIPDXRR9CCLELNGFPSHHDWOWRJRSTHWPVQGJORVCYWWPPWRQKTXJDLMUOMIAJVOMDPSJDCOLPMUTOLGSLDNQDOGWXSXNNUIKUPZHGIPODKGRRWJ9VLMRVWNG9PKYECVUCJZC9LUHJDGOQZUOIAELIGQB9FRWFHTOYDGAFHIOFVBJMXBWYNNDWCQZQDVZQRYIWKUKKWEELQYDJCORDKJLLLARRWJIWZDGRNZ9XFPACRJZJUMBAXBRGSWJSOQSIU9JQXMILYIEAQKQHEZJSDDHBRIWJJVRKIPHFYPZGJUKOWSJZZSQFL9EZHGTJPWZNFLMGKCFSMGPVKSHGLUXBAGWCEJFAWNAJQIDGAYYDQTDUZK9NXIKGILBDFURWMIOYWUWTZRZDASUKZWUHVSGLAUOODXRYGL9DQDLQZZAGDJUZQMCTZ9KHOFDARVJMOGXGTOJXVGEVTBDJAIPQHHXFTZRGMUPMZSXTQBMGPQGZNHENNECQCMAQBFPDPHKTDPWEPB9UCLJ9AKYEEVCCTQ9GBSDSNX9VKUKNR9HRXYVDAYH9PIEPAKOVA9MNMIGUDBLNYWCXJIKMNTSNJELYWMLBNPKFYTPJYAEESWQIOAQZPCMPZVWBUHBWCIHDYNFP9WVSPW9NEWZHBSLYLYILHEQNHTNSPFUWVDFVIOKQUBEGU9Z9DLOYVAWPEZTPAGPBLBEKCSLT9RIGJNAEVVGFEHBQULEWOCNKUMQ9QDTOGSKNVMJCBGUKHMHJMGNPG9CPMNMVMKAJPMWBCSINDXKYOFXLGDGXO9NDIIBMSPHWWUWYAUNNBDSNMD9W9NBUSNMJUEALBZNDJSRKXVJCMFNJDH9MKWDDQZXBJI9AQLTZOEFUPYNEMDAOOBUUYPWUJRYRHWTCMZRCIFXZTQFTYXCFNHZJFISHBDIRCEJXHRSPFBTCYR9SOQF9SPZIVRJTZHQICGYQXNJJWUXHAQWTCDUQMWOFUOXYBZIMZQRMVLGHZGWGWDYILZAQHKDNHBDELFREUBRSVAEGUKOIIJFJURYS9HBDTYJIUZGRBMIQHUVXMYVLVHKPGDYQLS9ULVMYBQZUZLDRTTGENBZVLHUMAFVGZDFCAWJVQZNXVCJNFWZ9PVQHRNGUGSXLOBYVZETDXIXGIKTEUSMTHVZQXTFCOKTBZYXTLLCRQAMSJEKQBYJMZAFILVKAJLOYNFGDDG9YNHPC9DWREOQHTHPPIKEEWIGF9VRLNSHEUIYZTSJR9DKPSTAWJQJXVRVFLVMLKNCNFYFNZCF9NFDZXOTYWT9BOQJMMDOBYIOYM9LUKWLCXGWXKSDFELZZUEMUTXAT9MRJQOPKBPFAQJO9TIV9GLZTOEQUNUEJSJOYPU9MBY9SXIOMLEB9LKOFOTIRUBB9LMHOWBKIGPOPTJAXB9VUQRVSKHBLUMW9UJVZPKEWEVWOEXZJUTUVTABMAYDDWRFIOSFIFQPKWJXZKKKEJDXQLNPKNAOJYLQWPLLQWNFFCQXJHNRJKIBDESVHNWYQTIIWUR9MFY9DPEFSFYYQZTXHHEVIQLUOCCGKSA9XDT9GMOXHEMTCC9SOHKIG9YFWXD9IMNTYPOYWSTNBJIFDTLVMFGC9ATTIYCOXORCHMCGRNRW9CVMTWBCZ9AHZPEJFPBSXCZWERAFCWJCPQ99OIEFVQYURSITXB9FOFKIOORNATJVIOKFFNOKTRTEQBMSAITHBHUQDKDPVFMKIAUB9FRY',
            address: 'ESQXC9AQJOVAMXTETOHSAYOC9YGZWYVINPZYMATOCVTBHYSITEAOAUPBCHUGVPURCZHWBPVRERWGYELUW',
            value: -699200,
            obsoleteTag: '999999999999999999999999999',
            timestamp: 1509988185,
            currentIndex: 1,
            lastIndex: 3,
            bundle: 'RILUGDZPDPJE9QHBYJH9ZIGIXGUWIYW9CIOPIETIY9IOA9ZKSXTRCLXLEQJOBOPB9JNSSCJVYIKU9DKRW',
            trunkTransaction: 'JXGBWVUAPRERUPXFPTAPBQNKKSD9N9JL9MPSTBJJNFG9IZAAUINJNWQRPRVUKSFEDVUEDZICITUOA9999',
            branchTransaction: 'FHEUXVKRZVAPHANUQNYEZHSANWRIRFCDWMAZRC9WBHXUDXSDSSDBPVKZHDAPXDBVY9DWNWV9WLURA9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509988300591,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'VA999ISB9999999999999999999',
            persistence: false,
        },
        {
            hash: 'JXGBWVUAPRERUPXFPTAPBQNKKSD9N9JL9MPSTBJJNFG9IZAAUINJNWQRPRVUKSFEDVUEDZICITUOA9999',
            signatureMessageFragment:
                'ZMNM9NYBCLFNVRBVBMO9DHZGUEBIBVLVNTTUCZOWAERFEDMOWOZWCWBRZOUUAEKBRSONWWTBVQHXNGQ9CGPNDHFGTRVKFGXPKCWDUKCXKZIHY9TZC9GFIENQSFQMJMYUYSBLQPUSYZKGJKUSOXDVJUOMVUUERXHEOZRUVCYOBRBQRKIHOCCUNYQFCLUOKFOCQHZTYLSH99PMPZLVWTDBLILVMHAFACYLCJQKVNCKM9BOAIPDVRBTFIAHBPZBUGNPPLO9JLJPYJJOHDSHTMYNIJVKKOUHLXUJCMSVSKCNMHJ9PIJXZAKDKQRVK9MBIMJPYAQDZMQKEQJNHSDRCJNNGPMVGJPBJPKZBNQDTSUSEE9CNT9HAJDZRRZKNIGKQSGARRSFCTDKUILBWDTIZYGSDVTMKCHJHYOKJNOPCB9AZFIYPISPGYCAASCDHQ9UMXABYWYDZJEZAICCOMOQYYCHBCJVGVGWWFUKPUOKKZJKLEGSMLDHYFHSPPRZCXCHXWGLMFNVHJ9V9TSVBEOPKBZSFYUGPOSSGTEQDPT9DTNXWLRTNVZIZROZLC9UFHUTICS9JFMLTMWJOA9LRUPTYDRHEONWNAYBQYBSGEYYPWXPOOOTEHXBNPCVCVYDXC9LFHHCAYCXEOGXMPVCO9CXEKLIBIZSIUXYIVNRZEADAIGCVYAHOCETIBVVQZHVGCKI9SBUP9SASNRUJTJXMXIZWVOO9MAGCSFKVGVRZQNKIJBIIDKMCE9NXCAKQLMFJZDUVCSSGATGFVFUFQGVYXZLZY9OLPMLQTJVK9FT9HKOOPBAGDCRXYZFORKPYXEOTJLMBULTHGHM99VBJZLQCOZFPTOZSICYXXMTEQYGDH9JZAGLV9LNQLIPBBBDNTPOUDYR9ALNRWMIKKEY9JWEFEMLCXAZ9JVZNOANSJIWCSUBRVE9LVIEWBEWWKRYVVPENPJIICRP9VXRCKMXXQGYIKZAMKAZKJXOMXHLELUPTVMHKXFLLXXVGJNNYOGLQUYIV9YVWMLRQVXUOFJXWFDSYVYVWUIQAQGSSKHXXKLQVLFPGPHJAULCWTPYVSBNWTZ9EMBAYYPYUXMDBQIKNLWMKZBVJN9SSNTEELJGWGNCDHBDMGRJXKHONXNOGKCJVV9YHKSLGFPJYDS9QTXZNJCDXAUQRMBDERZNICMVXVVFVQHZTP9AZCNBCSYRFYHNPMHUNREJUXDOICCEIMWSNRHCWNPAPRSVVMWZAGEJNVGYTNMDBMHAZ9GZXEZAILJBGYUESKWSUYYX9EDIBOAAWRODLKTCSERACKTKHAFULIEYQSNSUYCCOYMMSETAWYKCNQZOJYHEUYQYGUBISOGGYCIDTBPFZAFPOZCVKUVKYOWMYRFEOFCXNMNPDJT9VNWEYHRFXEEIQDELVGWGMEWOMDCUFEWKDNZKTBUTVBWWKNIGYFQGDGIFTXCBRCDWU9NSMRROTYH99LGQCRJYOBZIJTVXVUCJUVJYWCIS9YGGWIVDUNNZ9S9ELXOMYDKOIWZT99RYDKOZDTEAGTWUIMBCJKLXFS9XFRILULBOZOYEYR9PEGXKTELZSDPLSCMLXJHBHDSWZSNQCWKSHYRRXHEDZMTDBSFYUMWWUHTTTGKHPRIDTESIBYJESQLIWKQRELJBJWIQRHAYKIFNKBNBQEMT9LJGLWRQZPNTEAMWQANGFOVJRTXSASBPGLFZPNSQVOYZSPQUGGAQIZ9HAKRIWROOYDXVSFMSBZTFLVJGZFUZSDXWTKFYPPAROTYVYXHNAVGRCCDQNVHIINHXNRVIRKTXVFZSQWETWNLYKF9HNQAPAA9VI9TBHICVMQBBDRFNYQPOLBXRFWZLRKPPAVXTNIZGSJUZNLKAGLADDGCIYHIWEDMOSQPWOLENRJYTT9OGTZBWKNHC9NNFREPBZWCUDOTTYKICZVVYXYLWCGACSAMBYKT9FERAXBXXTQXUZLWZBVRYIVGIVDDDUAGBAAGPOTUXDEZIWC99VKDXM9XKJHJOHTGGOGOQBBIYXMEIZQKTBBWWKKSYFURERINSOU9ILDVZEUJDKCCWG9FCDJVOJHODVPHAK9HSAZSBUEO9BZPTUDGICJS9CCGO9XCYMIHQBTWKIEKPJWUBZZMMUYDVQUEUVTDABNKXSANGRCHRKUHCFDKIGGVXJEPLEYDQYTVUBKPCOZC',
            address: 'ESQXC9AQJOVAMXTETOHSAYOC9YGZWYVINPZYMATOCVTBHYSITEAOAUPBCHUGVPURCZHWBPVRERWGYELUW',
            value: 0,
            obsoleteTag: '999999999999999999999999999',
            timestamp: 1509988185,
            currentIndex: 2,
            lastIndex: 3,
            bundle: 'RILUGDZPDPJE9QHBYJH9ZIGIXGUWIYW9CIOPIETIY9IOA9ZKSXTRCLXLEQJOBOPB9JNSSCJVYIKU9DKRW',
            trunkTransaction: 'AFTWBRTA9YQLYQFGFVAOHKXAODTDCGYTZHVGYBMURDRGLHYICHNZKNVSUQBNEKKEITEFKHMSW9MA99999',
            branchTransaction: 'FHEUXVKRZVAPHANUQNYEZHSANWRIRFCDWMAZRC9WBHXUDXSDSSDBPVKZHDAPXDBVY9DWNWV9WLURA9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509988237251,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'XZ9999WB9999999999999999999',
            persistence: false,
        },
        {
            hash: 'AFTWBRTA9YQLYQFGFVAOHKXAODTDCGYTZHVGYBMURDRGLHYICHNZKNVSUQBNEKKEITEFKHMSW9MA99999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'ZRMTF9CQWKDDBNVOZHZIQAAGRIE9KWBFSIJSF9VMLXSYPZPGZ9RJKQKMEWSIUXNFPVUSWSMCROQXNUBXW',
            value: 698900,
            obsoleteTag: '999999999999999999999999999',
            timestamp: 1509988211,
            currentIndex: 3,
            lastIndex: 3,
            bundle: 'RILUGDZPDPJE9QHBYJH9ZIGIXGUWIYW9CIOPIETIY9IOA9ZKSXTRCLXLEQJOBOPB9JNSSCJVYIKU9DKRW',
            trunkTransaction: 'FHEUXVKRZVAPHANUQNYEZHSANWRIRFCDWMAZRC9WBHXUDXSDSSDBPVKZHDAPXDBVY9DWNWV9WLURA9999',
            branchTransaction: 'LFHVWLRDWSTBWIBNHZGDTCULQLDDGJGMF9EPAPJAEJAVHFHSBUNI9HVQCYRZCONQWHRKYBUOTHKHZ9999',
            tag: '999999999999999999999999999',
            attachmentTimestamp: 1509988214546,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 3812798742493,
            nonce: 'UA999IPA9999999999999999999',
            persistence: false,
        },
    ],
    [
        {
            hash: 'NWVWGEBVRWPYUXLSJBNODBTPAFGYCQIVSZUGRBLDWSKRGDQJUNLGHRXGKAYP9CGWZOVVCPSFXJZI99999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'PBIWEDQONHCTPTEJDRWLGPBTUHFVXDUXVRBUISTG9ZAM9GLIMJCWFAJIOUMTTF9QXQWGQLNIWHFTEHBPY',
            value: 0,
            obsoleteTag: 'ZC9999999999999999999999999',
            timestamp: 1509985380,
            currentIndex: 0,
            lastIndex: 0,
            bundle: 'LXBYRFT9LR9FRJAPGWBIIRXKJCLXAPFXLZPN9ZRFVIXIDJLFVF9G9SDREDZSOCCGAWCDKQADYHGHIPDJB',
            trunkTransaction: 'LRPUBLZDQJRKGLEZ9OEFVXJYQPPV9OQRJNJNQKPMBMWTSHHEVDZSLZWQRKFTFQORQPCEYJHGXKGWA9999',
            branchTransaction: 'ULIUHIHIYDE9FEIASRWJTYJ9IDAEOBPUKZBJHAXMPLBDVSAEDWAZYJENWEKFOJJRCKZGGLYRLI9IZ9999',
            tag: 'ZC9999999999999999999999999',
            attachmentTimestamp: 1509990362178,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 12,
            nonce: 'XFWPYH9JIRLWECHABITN9ABUADS',
            persistence: true,
        },
    ],
    [
        {
            hash: 'YRGIQEOQVHLDOIXYNJXMDVSJQYGSHYIDBOQZGRWKEUIETGNPIOAAUYMI9Z9OEZEISFMIBJMHRTFG99999',
            signatureMessageFragment:
                '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999',
            address: 'PBIWEDQONHCTPTEJDRWLGPBTUHFVXDUXVRBUISTG9ZAM9GLIMJCWFAJIOUMTTF9QXQWGQLNIWHFTEHBPY',
            value: 0,
            obsoleteTag: 'ZC9999999999999999999999999',
            timestamp: 1509985380,
            currentIndex: 0,
            lastIndex: 0,
            bundle: 'LXBYRFT9LR9FRJAPGWBIIRXKJCLXAPFXLZPN9ZRFVIXIDJLFVF9G9SDREDZSOCCGAWCDKQADYHGHIPDJB',
            trunkTransaction: 'FMWFQU9ATRQQWXLJXKBYZXXCISKKDVU9BSUQHNXMBCLPOUEOT9MPUI9PWMPTYFYLQFESVCWNSNAB99999',
            branchTransaction: 'KICWOHAKODWJCYEYYNRWOILAWTLPDDLBANZRZQDQB9ZLJEOPDAAYRHRYYZUKCORVCYDCCIDBHBTX99999',
            tag: 'ZC9999999999999999999999999',
            attachmentTimestamp: 1509990999189,
            attachmentTimestampLowerBound: 0,
            attachmentTimestampUpperBound: 12,
            nonce: 'D9TNVTAGOA9IFTPWPNTUBXTQGFC',
            persistence: true,
        },
    ],
];
const initialState = {
    balance: 0,
    ready: false,
    receiveAddress: '',
    password: '',
    seed: '                                                                                 ',
    seedName: 'MAIN WALLET',
    seedIndex: 0,
    transactions: t,
    isGeneratingReceiveAddress: false,
    usedSeedToLogin: false,
};

export default (state = initialState, action) => {
    switch (action.type) {
        case 'SET_ACCOUNTINFO':
            return {
                ...state,
                balance: action.balance,
                transactions: t,
            };
        case 'SET_SEED':
            return {
                ...state,
                seed: action.payload,
            };
        case 'SET_SEED_NAME':
            return {
                ...state,
                seedName: action.payload,
            };
        case 'SET_PASSWORD':
            return {
                ...state,
                password: action.payload,
            };
        case 'SET_ADDRESS':
            return {
                ...state,
                receiveAddress: action.payload,
            };
        case 'GENERATE_NEW_ADDRESS_REQUEST':
            return {
                ...state,
                isGeneratingReceiveAddress: true,
            };
        case 'GENERATE_NEW_ADDRESS_SUCCESS':
            return {
                ...state,
                isGeneratingReceiveAddress: false,
                receiveAddress: action.payload,
            };
        case 'GENERATE_NEW_ADDRESS_ERROR':
            return {
                ...state,
                isGeneratingReceiveAddress: false,
            };
        case 'SET_READY':
            return {
                ...state,
                ready: action.payload,
            };
        case 'INCREMENT_SEED_INDEX':
            return {
                ...state,
                seedIndex: state.seedIndex + 1,
            };
        case 'DECREMENT_SEED_INDEX':
            return {
                ...state,
                seedIndex: state.seedIndex - 1,
            };
        case 'SET_USED_SEED_TO_LOGIN':
            return {
                ...state,
                usedSeedToLogin: action.payload,
            };
        case 'CLEAR_IOTA':
            return {
                ...state,
                balance: 0,
                transactions: [],
                receiveAddress: '',
                seed: '',
                password: '',
                ready: false,
                usedSeedToLogin: false,
            };
        default:
            return state;
    }
};

export const getTailTransactionHashesForPendingTransactions = (transfers, addresses) => {
    if (size(transfers)) {
        const normalize = (res, val) => {
            each(val, v => {
                if (!v.persistence && v.currentIndex === 0) {
                    res.push(v.hash);
                }
            });

            return res;
        };

        const categorizedTransfers = iota.utils.categorizeTransfers(transfers, addresses);
        const sentTransfers = get(categorizedTransfers, 'sent');

        return reduce(sentTransfers, normalize, []);
    }

    return [];
};
